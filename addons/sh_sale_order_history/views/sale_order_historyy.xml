<?xml version="1.0" encoding="utf-8"?>

<odoo>
         <!-- step2 window action -->

        <record id="sale_order_history_report_action" model="ir.actions.act_window">
        <field name="name">تقارير الجرد</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">sale.order.history</field>
        <field name="view_mode">tree</field>
        <field name="context">{}</field>
        </record>

        <!-- step 1 menu-->
      <menuitem id="sale_order_history_report"
                    name=" تقارير الجرد"
                    action="sale_order_history_report_action"
                    sequence="1"/>

       <!-- step3 tree -->
        <record id="sh_sale_order_historyy_tree" model="ir.ui.view">
        <field name="name">sale.order.history.tree</field>
        <field name="model">sale.order.history</field>
        <field name="arch" type="xml">

            <tree editable="bottom" create="false" decoration-danger="product_uom_qtyy &gt; product_uom_qty">
                            <field name="customer" string="customer" optional="show" />
                           <!-- <field name="sale_reorder" nolabel="1" optional="show" /> -->
                            <field name="so_id" string="Sale Order" optional="show" />
                            <field name="date_order" string="Order Date" optional="show" />
                            <field name="name" invisible="1" />
                            <field name="product_id" optional="show" />
                            <field name="pricelist_id" optional="show" />
                            <field name="price_unit" string="Price" optional="show" />
                            <field name="new_price_unit" string="New Price" optional="show" />
                            <field name="product_uom_qty" optional="show" />
                            <field name="product_uom" string="Unit" optional="show" />
                            <field name="product_uom_qtyy" optional="show" />

                  <!--
                            <field name="discount" optional="show" />
                            <field name="price_subtotal" optional="show" />
                            <field name="enable_reorder" invisible="1" />
                            <field name="status" decoration-success="status == 'sale' or status == 'done'" decoration-info="status == 'draft' or status == 'sent'" widget="badge" />
                            <button name="sales_reorder" class="fa fa-retweet btn btn-light text-primary" title=" " type="object" attrs="{'invisible':[('enable_reorder','=',False)]}" />
                            <button name="view_sales_reorder" class="fa fa-eye btn btn-light text-primary" title=" " type="object" />
                            -->
                        </tree>
        </field>
    </record>
        <!-- step4 search 1-by field 2-group by -->
        <record id="sh_sale_order_historyy_search" model="ir.ui.view">
        <field name="name">sale.order.history.search</field>
        <field name="model">sale.order.history</field>
        <field name="arch" type="xml">


            <search>
                 <!-- search by field -->
                            <field name="customer" string="customer"/>
                            <field name="so_id" string="Sale Order"/>
                            <field name="date_order" string="Order Date"/>
                            <field name="product_id" string="product" />
                            <field name="price_unit" string="Price"/>
                            <field name="product_uom_qty" string="product qty"/>
                            <field name="product_uom" string="Unit"/>
                            <field name="product_uom_qtyy" string="الجرد" />
                 <!-- search by group by -->
                <group expand="0" string="Group by">
                   <filter string="customer" name="customer_group" context="{'group_by':'customer'}"/>
                    <filter string="Sale Order" name="so_id_group" context="{'group_by':'so_id'}"/>
                    <filter string="Order Date" name="date_order" context="{'group_by':'date_order'}"/>
                    <filter string="product" name="product_id" context="{'group_by':'product_id'}"/>
                    <filter string="Price" name="price_unit" context="{'group_by':'price_unit'}"/>
                    <filter string="product qty" name="product_uom_qty" context="{'group_by':'product_uom_qty'}"/>
                    <filter string="Unit" name="product_uom" context="{'group_by':'product_uom'}"/>
                    <filter string="الجرد" name="product_uom_qtyy" context="{'group_by':'product_uom_qtyy'}"/>
                </group>
            </search>
        </field>
    </record>

      <!--                                          -->

       <!-- button action -->
        <record id="sale_order_history_button_action" model="ir.actions.act_window">
            <field name="name">test</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order.history</field>
            <field name="view_mode">tree</field>
            <field name="context">{}</field>
         <field name="domain">[('customer', '=', 'Active_id')]</field>
        </record>


    <!-- button -->
        <record id="sh_sale_order_historyy_treee" model="ir.ui.view">
        <field name="name">sale.order.history.treee</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form"/>
        <field name="arch" type="xml">
                    <header>
                    <button name="%(sh_sale_order_history.sale_order_history_button_action)d" type="action" string="الجرد"/>
                    </header>
            </field>
        </record>


</odoo>
